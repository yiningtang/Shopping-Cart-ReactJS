<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello React</title>
   
<script src="build/react.js"></script>
    <script src="build/JSXTransformer.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

  </head>
  <body>
    <div id="example"></div>
    <script type="text/jsx">


/** @jsx React.DOM */


// This is more complex example that uses two components -
// a service chooser form, and the individual services inside it.


var ServiceChooser = React.createClass({
   getInitialState: function(){
        return { total: 0,searchString:""}; 
        
        
    },


   
   addTotal: function( price ){

        
  
     this.setState({ total:this.state.total+price  });


    },
      handleChange3: function(e){

        // If you comment out this line, the text box will not change its value.
        // This is because in React, an input cannot change independently of the value
        // that was assigned to it. In our case this is this.state.searchString.

        this.setState({searchString:e.target.value});

    },

    render: function() {

        var self = this;
      total=this.state.total;
      active=this.state.active;
      num=this.state.num;


        var services1 = this.props.items.map(function(s){

         

            return <Service name={s.name} price={s.price} active={s.active} addTotal={self.addTotal}  />;
        });
 
    searchString = this.state.searchString;

     if(searchString.length > 0){

            // We are searching. Filter the results.

            services1 = this.props.items.filter(function(a){
                  
                return a.name.toLowerCase().match(searchString);
            });
            services1 = services1.map(function(s){

         

            return <Service name={s.name} price={s.price} active={s.active} addTotal={self.addTotal}  />;
        });

        }
   
            
  
          
           

        

        
      

        

        return <div>
                    <h1>Our services</h1>
                     
                    <div id="services">
                    <input type="text" value={this.state.searchString} onChange={this.handleChange3} placeholder="Type here" />
                      
                       <ul> 
                    
                    {services1}

                    </ul>
                   
                    </div>
                    <p id="total">Total <b>{this.state.total}</b></p>
                </div>;

    }
});


var Service = React.createClass({
   getInitialState: function(){
        return { active: false }; 
        
        
    },
     

   clickHandler: function (){

        var active = !this.state.active;

        this.setState({ active: active });
        var price= this.props.price;
       

        if (active==true)
        {
 

this.props.addTotal(price);


       
        }
    else
        {      alert("Delete?");
     this.props.addTotal(-price);
   
         }
      
     
        

    },

    render: function(){
     



      return  <div><p className={ this.state.active ? 'active' : '' } onClick={this.clickHandler}>
                   {this.props.name} <b>${this.props.price.toFixed(2)}</b>
                   
                </p>
              
                 </div>

                ;

    }

});


var services = [
    { name: 'Web Development', price: 300 },
    { name: 'Design', price: 400 },
    { name: 'Integration', price: 250 },
    { name: 'Training', price: 220 }
];


// Render the ServiceChooser component, and pass the array of services


React.render(
    <ServiceChooser items={ services } />,
    document.body
);


  </script>
  </body>

</html>